<nav class="page-navigation">
  {% assign pages = site.pages | sort:"position" %}
  {% if pages.size > 0 %}
  <ul>
    {% comment %}
    Page sorting solution found here:
    http://stackoverflow.com/questions/9053066/sorted-navigation-menu-with-jekyll-and-liquid
    {% endcomment %}
    {% for node in pages %}
      {% assign depth = node.dir | split:"/" | size %}
      {% if node.layout == "mainpage" and node.title != null and depth <= 2 %}
      <li {% if page.url == node.url %}class="active"{% endif %}>
        <a href="{{node.url |Â prepend: site.baseurl}}">{{ node.title }}</a>
      </li>
      {% endif %}
    {% endfor %}
  </ul>
  {% endif %}
</nav>